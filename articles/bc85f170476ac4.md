---
title: "SwiftPMã§Firestoreã‚’å°å…¥ã™ã‚‹"
emoji: "ğŸ˜¸"
type: "tech"
topics: ["Swift", "SwiftPM", "Firebase"]
published: false
---

# æ¦‚è¦

Swift Package Manager ã‚’ä½¿ã£ã¦ Firestore ã‚’å°å…¥ã—ã€æ¥ç¶šã—ã¦ã¿ã‚‹ã¨ã“ã‚ã¾ã§ã®æ‰‹é †ã‚’è§£èª¬ã—ã¾ã™ã€‚

# æ‰‹é †

## Xcodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ

## Firebaseã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
https://console.firebase.google.com/?hl=ja

![](/images/bc85f170476ac4/image3.png)

ã‚¢ãƒ—ãƒªã‚’è¿½åŠ ã‹ã‚‰iOS+ã‚’é¸æŠã—ã¦ã€ã‚¢ãƒ—ãƒªã®ç™»éŒ²ã‚’è¡Œã†ã€‚æ‰‹é †ãŒã‚ã‚‹ã®ã§æŒ‡ç¤ºé€šã‚Šã«è¡Œã†ã€‚

### ã‚¢ãƒ—ãƒªã®ç™»éŒ²

ãƒãƒ³ãƒ‰ãƒ«IDã¨ã‚¢ãƒ—ãƒªåã‚’å…¥åŠ›ã™ã‚‹ã€‚

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»é…ç½®

Gitãƒªãƒã‚¸ãƒˆãƒªã‚’å…¬é–‹ã—ãŸã„å ´åˆã¯ã€.gitignoreã«è¨˜è¼‰ã™ã‚‹ã®ãŒç„¡é›£ã€‚

![](/images/bc85f170476ac4/image2.png)

### SDKã®è¿½åŠ ï¼ˆSPMã®åˆ©ç”¨ï¼‰

![](/images/bc85f170476ac4/image1.png)

### åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ã®è¿½åŠ 

Xcodeã®è‡ªå‹•ç”Ÿæˆã§AppDeligateãŒç”Ÿæˆã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã‚¯ãƒ©ã‚¹ã”ã¨ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹ã€‚

```swift:MyApp.swift
import SwiftUI
import FirebaseCore
import FirebaseFirestore

class AppDelegate: NSObject, UIApplicationDelegate {
    func application(_ application: UIApplication,
                     didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil) -> Bool {
        FirebaseApp.configure()
        
        return true
    }
}

@main
struct MyApp: App {
    @UIApplicationDelegateAdaptor(AppDelegate.self) var delegate
    
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}

```

## æ§‹ç¯‰
![](/images/bc85f170476ac4/image4.png)

Firestore Database ã‚’é¸æŠã—ã¦ã€æ§‹ç¯‰ã™ã‚‹ã€‚

![](/images/bc85f170476ac4/image5.png)
ä»Šå›ã¯ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ä½œæˆã—ã¾ã™ã€‚

![](/images/bc85f170476ac4/image6.png)
è¿‘ã„ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸ã¶ã¨è‰¯ã„ã§ã™ã€‚

## ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ 

å®Ÿè£…
```swift:Firestore.swift
import FirebaseFirestore
let db = Firestore.firestore()

func setBook() async {
    do {
        try await db.collection("books").document(UUID().uuidString).setData([
            "name": "book",
        ])
    } catch {
        // ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†ã‚’æ›¸ã
        FatalError()
    }
}
```

å‘¼ã³å‡ºã—å´
```swift:ContentView.swift
import SwiftUI

  struct ContentView: View {
    var body: some View {
        VStack {
            Button("ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ") {
                Task {
                    await setBook()
                }
            }
        }
        .padding()
    }
  }
```

ãƒ“ãƒ«ãƒ‰ã—ã¦ã€Œãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€Firestoreã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒåæ˜ ã•ã‚Œã‚‹ã€‚ï¼ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒæ–°è¦ã«ä½œæˆã•ã‚Œã‚‹å ´åˆã¯ã€å†èª­ã¿è¾¼ã¿ã™ã‚‹ã“ã¨ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ï¼‰

![](/images/bc85f170476ac4/image7.png)

æ¥ç¶šã§ããŸã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸğŸ‰

# å‚è€ƒæ–‡çŒ®
- https://cloud.google.com/firestore/docs/client/get-firebase?hl=ja
- https://firebase.google.com/docs/ios/setup?hl=ja
- https://tech.nri-net.com/entry/firestore_swift_async_await
